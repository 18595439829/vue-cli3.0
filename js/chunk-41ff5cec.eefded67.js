(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41ff5cec"],{5906:function(t,i,e){"use strict";var n=e("662b"),a=e.n(n);i["default"]=a.a},"5bc0":function(t,i,e){},"662b":function(t,i,e){t.exports={map:"HeatMap_map_3mCWo"}},c35f:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{class:t.$style["map"],attrs:{id:"map"}}),e("Button",{on:{click:t.add}},[t._v("添加热力图")]),e("Button",{on:{click:t.clear}},[t._v("清除热力图")])],1)},a=[],o=(e("ac6a"),e("d225")),r=e("b0b4"),s=(e("5bc0"),e("5eee")),h=e("a2c7"),c=e("d0e9"),g=e("f403"),_=e("5831"),l=e("4cdf"),d=e("256f"),u=e("480c"),p=e("1e8d"),f=e("e269"),m=e("0999"),O=e("3e6b"),y=e("7fc9"),v=e("38f3"),I=e("070d"),w=e("1300"),b=e("869f"),T=e("92fa"),R=e("5c38"),S=e("01d4"),D={FRACTION:"fraction",PIXELS:"pixels"},E=e("0ec0"),z=e("3c22"),C=function(t){function i(i,e,n,a,o,r){t.call(this),this.hitDetectionImage_=null,this.image_=i||new Image,null!==a&&(this.image_.crossOrigin=a),this.canvas_=r?document.createElement("canvas"):null,this.color_=r,this.imageListenerKeys_=null,this.imageState_=o,this.size_=n,this.src_=e,this.tainted_}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===b["a"].LOADED){this.tainted_=!1;var t=Object(m["a"])(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(i){this.tainted_=!0}}return!0===this.tainted_},i.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(S["a"].CHANGE)},i.prototype.handleImageError_=function(){this.imageState_=b["a"].ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},i.prototype.handleImageLoad_=function(){this.imageState_=b["a"].LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},i.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},i.prototype.getImageState=function(){return this.imageState_},i.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var i=this.size_[0],e=this.size_[1],n=Object(m["a"])(i,e);n.fillRect(0,0,i,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},i.prototype.getSize=function(){return this.size_},i.prototype.getSrc=function(){return this.src_},i.prototype.load=function(){if(this.imageState_==b["a"].IDLE){this.imageState_=b["a"].LOADING,this.imageListenerKeys_=[Object(p["b"])(this.image_,S["a"].ERROR,this.handleImageError_,this),Object(p["b"])(this.image_,S["a"].LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},i.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var i=t.getImageData(0,0,this.image_.width,this.image_.height),e=i.data,n=this.color_[0]/255,a=this.color_[1]/255,o=this.color_[2]/255,r=0,s=e.length;r<s;r+=4)e[r]*=n,e[r+1]*=a,e[r+2]*=o;t.putImageData(i,0,0)}},i.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(p["e"]),this.imageListenerKeys_=null},i}(E["a"]);function L(t,i,e,n,a,o){var r=z["a"].get(i,n,o);return r||(r=new C(t,i,e,n,a,o),z["a"].set(i,n,o,r)),r}var A={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},j=e("ab35"),P=function(t){function i(i){var e=i||{},n=void 0!==e.opacity?e.opacity:1,a=void 0!==e.rotation?e.rotation:0,o=void 0!==e.scale?e.scale:1,r=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:n,rotation:a,scale:o,rotateWithView:r}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:A.TOP_LEFT,this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:D.FRACTION,this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:D.FRACTION,this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var s=void 0!==e.img?e.img:null,h=void 0!==e.imgSize?e.imgSize:null,c=e.src;Object(T["a"])(!(void 0!==c&&s),4),Object(T["a"])(!s||s&&h,5),void 0!==c&&0!==c.length||!s||(c=s.src||Object(w["c"])(s)),Object(T["a"])(void 0!==c&&c.length>0,6);var g=void 0!==e.src?b["a"].IDLE:b["a"].LOADED;this.color_=void 0!==e.color?Object(R["a"])(e.color):null,this.iconImage_=L(s,c,h,this.crossOrigin_,g,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:A.TOP_LEFT,this.origin_=null,this.size_=void 0!==e.size?e.size:null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return new i({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},i.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,i=this.getSize();if(this.anchorXUnits_==D.FRACTION||this.anchorYUnits_==D.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==D.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==D.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=A.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=A.TOP_RIGHT&&this.anchorOrigin_!=A.BOTTOM_RIGHT||(t[0]=-t[0]+i[0]),this.anchorOrigin_!=A.BOTTOM_LEFT&&this.anchorOrigin_!=A.BOTTOM_RIGHT||(t[1]=-t[1]+i[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},i.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},i.prototype.getColor=function(){return this.color_},i.prototype.getImage=function(t){return this.iconImage_.getImage(t)},i.prototype.getImageSize=function(){return this.iconImage_.getSize()},i.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},i.prototype.getImageState=function(){return this.iconImage_.getImageState()},i.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},i.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=A.TOP_LEFT){var i=this.getSize(),e=this.iconImage_.getSize();if(!i||!e)return null;t=t.slice(),this.offsetOrigin_!=A.TOP_RIGHT&&this.offsetOrigin_!=A.BOTTOM_RIGHT||(t[0]=e[0]-i[0]-t[0]),this.offsetOrigin_!=A.BOTTOM_LEFT&&this.offsetOrigin_!=A.BOTTOM_RIGHT||(t[1]=e[1]-i[1]-t[1])}return this.origin_=t,this.origin_},i.prototype.getSrc=function(){return this.iconImage_.getSrc()},i.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},i.prototype.listenImageChange=function(t,i){return Object(p["a"])(this.iconImage_,S["a"].CHANGE,t,i)},i.prototype.load=function(){this.iconImage_.load()},i.prototype.unlistenImageChange=function(t,i){Object(p["c"])(this.iconImage_,S["a"].CHANGE,t,i)},i}(j["a"]),G=P,U=e("6c77"),B={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},F=["#00f","#0ff","#0f0","#ff0","#f00"],H=function(t){function i(i){var e=i||{},n=Object(v["a"])({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.shadow,delete n.weight,t.call(this,n),this.gradient_=null,this.shadow_=void 0!==e.shadow?e.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(p["a"])(this,Object(f["b"])(B.GRADIENT),this.handleGradientChanged_,this),this.setGradient(e.gradient?e.gradient:F),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8),Object(p["a"])(this,Object(f["b"])(B.BLUR),this.handleStyleChanged_,this),Object(p["a"])(this,Object(f["b"])(B.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var a,o=e.weight?e.weight:"weight";a="string"===typeof o?function(t){return t.get(o)}:o,this.setStyle(function(t,i){var e=a(t),n=void 0!==e?Object(y["a"])(e,0,1):1,o=255*n|0,r=this.styleCache_[o];return r||(r=[new U["c"]({image:new G({opacity:n,src:this.circleImage_})})],this.styleCache_[o]=r),r}.bind(this)),this.setRenderOrder(null),Object(p["a"])(this,I["a"].RENDER,this.handleRender_,this)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.createCircle_=function(){var t=this.getRadius(),i=this.getBlur(),e=t+i+1,n=2*e,a=Object(m["a"])(n,n);a.shadowOffsetX=a.shadowOffsetY=this.shadow_,a.shadowBlur=i,a.shadowColor="#000",a.beginPath();var o=e-this.shadow_;return a.arc(o,o,t,0,2*Math.PI,!0),a.fill(),a.canvas.toDataURL()},i.prototype.getBlur=function(){return this.get(B.BLUR)},i.prototype.getGradient=function(){return this.get(B.GRADIENT)},i.prototype.getRadius=function(){return this.get(B.RADIUS)},i.prototype.handleGradientChanged_=function(){this.gradient_=M(this.getGradient())},i.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},i.prototype.handleRender_=function(t){for(var i=t.context,e=i.canvas,n=i.getImageData(0,0,e.width,e.height),a=n.data,o=0,r=a.length;o<r;o+=4){var s=4*a[o+3];s&&(a[o]=this.gradient_[s],a[o+1]=this.gradient_[s+1],a[o+2]=this.gradient_[s+2])}i.putImageData(n,0,0)},i.prototype.setBlur=function(t){this.set(B.BLUR,t)},i.prototype.setGradient=function(t){this.set(B.GRADIENT,t)},i.prototype.setRadius=function(t){this.set(B.RADIUS,t)},i}(O["a"]);function M(t){for(var i=1,e=256,n=Object(m["a"])(i,e),a=n.createLinearGradient(0,0,i,e),o=1/(t.length-1),r=0,s=t.length;r<s;++r)a.addColorStop(r*o,t[r]);return n.fillStyle=a,n.fillRect(0,0,i,e),n.getImageData(0,0,i,e).data}var N=H,X=function(){function t(){Object(o["a"])(this,t);var i=new u["a"]({source:new c["a"]});this.map=new s["a"]({layers:[i],target:"map",view:new h["a"]({center:Object(d["d"])([120.32714457090765,30.30569628128095]),zoom:11})})}return Object(r["a"])(t,[{key:"add",value:function(t){var i=new _["a"];t.features.forEach(function(t){var e=new l["a"]({geometry:new g["a"](Object(d["d"])(t.coordinates)),weight:t.weight});i.addFeature(e)}),this.heatLayer=new N({source:i,blur:10,radius:10,weight:function(t){var i=t.get("weight"),e=i/1;return e}}),this.map.addLayer(this.heatLayer)}},{key:"clear",value:function(){this.map.removeLayer(this.heatLayer)}}]),t}(),Y={name:"HeatMap",data:function(){return{heatMap:null,heatData:{type:"FeatureCollection",features:[{type:"Point",coordinates:[120.10878812064284,30.214101248758016],weight:100},{type:"Point",coordinates:[120.06299060438137,30.223642397979155],weight:19},{type:"Point",coordinates:[120.01623897319779,30.354356142308763],weight:419},{type:"Point",coordinates:[20.32714457090765,30.30569628128095],weight:319},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:719},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:519},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:319},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:139},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:129},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:190},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:189},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:1},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:119},{type:"Point",coordinates:[120.32714457090765,30.30569628128095],weight:200},{type:"Point",coordinates:[120.11642104001974,30.204560099536877],weight:300}]}}},mounted:function(){this.initMap()},methods:{initMap:function(){this.heatMap=new X},add:function(){this.heatMap.add(this.heatData)},clear:function(){this.heatMap.clear()}}},k=Y,W=e("5906"),x=e("2877");function V(t){this["$style"]=W["default"].locals||W["default"]}var K=Object(x["a"])(k,n,a,!1,V,null,null);i["default"]=K.exports}}]);
//# sourceMappingURL=chunk-41ff5cec.eefded67.js.map