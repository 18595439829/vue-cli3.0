(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-446e4c4c"],{"11c1":function(t,e,i){var s=i("c437"),o=i("c64e"),n=o;n.v1=s,n.v4=o,t.exports=n},1485:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{class:t.$style["map"],attrs:{id:"map"}}),i("Button",{on:{click:t.addDraw}},[t._v("添加画图功能")]),i("Button",{on:{click:t.removeDraw}},[t._v("移除画图功能")]),i("Button",{on:{click:t.getDrawPx}},[t._v("获取选中画图范围")]),i("Button",{on:{click:t.clearDraw}},[t._v("删除画图feature")]),t._v("\n  "+t._s(t.obj.arr.constructor===Array)+"\n")],1)},o=[],n=i("d225"),r=i("b0b4"),a=(i("5bc0"),i("5eee")),h=i("a2c7"),c=i("256f"),d=i("480c"),u=i("3e6b"),_=i("d0e9"),l=i("5831"),f=i("11c1"),p=i.n(f),y=i("ac29"),v=function(){function t(){var e=this;Object(n["a"])(this,t);var i=new d["a"]({source:new _["a"]});this.feature=null,this.source=new l["a"]({wrapX:!0}),this.drawLayer=new u["a"]({source:this.source}),this.map=new a["a"]({layers:[i,this.drawLayer],target:"map",view:new h["a"]({center:Object(c["d"])([120.32714457090765,30.30569628128095]),zoom:11})}),this.map.on("dblclick",function(t){console.log("双击666",t),e.draw.getActive()&&e.remove()})}return Object(r["a"])(t,[{key:"add",value:function(){var t=this;this.clear(),this.draw=new y["a"]({id:p()(),source:this.source,type:"Polygon",freehand:!0}),this.draw.on("drawend",function(e){console.log("画完了",e),t.feature=e.feature,t.remove()}),this.map.addInteraction(this.draw)}},{key:"remove",value:function(){this.map.removeInteraction(this.draw)}},{key:"clear",value:function(){this.draw&&this.feature&&(this.drawLayer.getSource().removeFeature(this.feature),this.feature=null)}},{key:"get",value:function(){if(!this.feature)return null;var t=this.feature.getGeometry();console.log("polygon",t);var e=t.getExtent();return e}}]),t}(),m={name:"DrawMap",data:function(){return{draw:null,obj:{arr:[{name:"1"}]}}},mounted:function(){this.initMap()},methods:{initMap:function(){this.draw=new v},addDraw:function(){this.draw.add()},removeDraw:function(){this.draw.remove()},clearDraw:function(){this.draw.clear()},getDrawPx:function(){var t=this.draw.get();console.log("px",t)}}},g=m,C=i("4ea2"),w=i("2877");function k(t){this["$style"]=C["default"].locals||C["default"]}var T=Object(w["a"])(g,s,o,!1,k,null,null);e["default"]=T.exports},2366:function(t,e){for(var i=[],s=0;s<256;++s)i[s]=(s+256).toString(16).substr(1);function o(t,e){var s=e||0,o=i;return[o[t[s++]],o[t[s++]],o[t[s++]],o[t[s++]],"-",o[t[s++]],o[t[s++]],"-",o[t[s++]],o[t[s++]],"-",o[t[s++]],o[t[s++]],"-",o[t[s++]],o[t[s++]],o[t[s++]],o[t[s++]],o[t[s++]],o[t[s++]]].join("")}t.exports=o},4857:function(t,e,i){t.exports={map:"DrawMap_map_1n72K"}},"4ea2":function(t,e,i){"use strict";var s=i("4857"),o=i.n(s);e["default"]=o.a},"5bc0":function(t,e,i){},ac29:function(t,e,i){"use strict";var s=i("01d4"),o=i("4cdf"),n=i("0b2d"),r=i("de46"),a=i("e269"),h=i("a568"),c=i("1e8d"),d=i("cef7"),u=i("06f8"),_=i("0af5"),l=i("57cb"),f=i("f623"),p=i("9abc"),y=i("abb7"),v=function(t){function e(e,i,s){if(t.call(this),void 0!==s&&void 0===i)this.setFlatCoordinates(s,e);else{var o=i||0;this.setCenterAndRadius(e,o,s)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,s){var o=this.flatCoordinates,n=t-o[0],r=e-o[1],a=n*n+r*r;if(a<s){if(0===a)for(var h=0;h<this.stride;++h)i[h]=o[h];else{var c=this.getRadius()/Math.sqrt(a);i[0]=o[0]+c*n,i[1]=o[1]+c*r;for(var d=2;d<this.stride;++d)i[d]=o[d]}return i.length=this.stride,a}return s},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,s=t-i[0],o=e-i[1];return s*s+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(_["k"])(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return f["a"].CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(_["F"])(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(_["t"])(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],s=t.slice();s[e]=s[0]+i;for(var o=1;o<e;++o)s[e+o]=t[o];this.setFlatCoordinates(this.layout,s),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var s=this.flatCoordinates,o=Object(y["a"])(s,0,t,this.stride);s[o++]=s[0]+e;for(var n=1,r=this.stride;n<r;++n)s[o++]=s[n];s.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(p["a"]);v.prototype.transform;var m=v,g=i("7a09"),C=i("47e4"),w=i("9a44"),k=i("88da"),T=i("5dca"),P=i("f403"),O=i("5bc3"),N=i("4105"),L=i("bf62"),D=i("3e6b"),I=i("5831"),b=i("6c77"),R={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},E={DRAWSTART:"drawstart",DRAWEND:"drawend"},F=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(d["a"]),G=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=l["a"]),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=S(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===R.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:l["b"];var s=e.geometryFunction;if(!s)if(this.type_===f["a"].CIRCLE)s=function(t,e){var i=e||new m([NaN,NaN]),s=Object(h["e"])(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(s)),i};else{var o,n=this.mode_;n===R.POINT?o=P["a"]:n===R.LINE_STRING?o=g["a"]:n===R.POLYGON&&(o=O["a"]),s=function(t,e){var i=e;return i?n===R.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new o(t),i}}this.geometryFunction_=s,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new D["a"]({source:new I["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:x(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:u["f"],this.freehandCondition_,e.freehand?this.freehandCondition_=u["b"]:this.freehandCondition_=e.freehandCondition?e.freehandCondition:u["g"],Object(c["a"])(this,Object(a["b"])(L["a"].ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===s["a"].CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==R.POINT&&this.freehandCondition_(e);var i=e.type===n["a"].POINTERMOVE,o=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===n["a"].POINTERDRAG){var r=Date.now();r-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===n["a"].POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),o=!1):this.freehand_&&e.type===n["a"].POINTERDOWN?o=!1:i?(o=e.type===n["a"].POINTERMOVE,o&&this.freehand_?o=this.handlePointerMove_(e):(e.pointerEvent.pointerType==T["b"]||e.type===n["a"].POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===n["a"].DBLCLICK&&(o=!1),t.prototype.handleEvent.call(this,e)&&o},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new r["a"](n["a"].POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===R.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===R.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,s=e[0]-i[0],o=e[1]-i[1],n=s*s+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_];if(this.mode_===R.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===R.POLYGON){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,s=[o[0][0],o[0][o[0].length-2]]}if(i)for(var n=t.map,r=0,a=s.length;r<a;r++){var h=s[r],c=n.getPixelFromCoordinate(h),d=t.pixel,u=d[0]-c[0],_=d[1]-c[1],l=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(u*u+_*_)<=l,e){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_){var i=this.sketchPoint_.getGeometry();i.setCoordinates(e)}else this.sketchPoint_=new o["a"](new P["a"](e)),this.updateSketchFeatures_()},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===R.POINT?this.sketchCoords_=e.slice():this.mode_===R.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o["a"](new g["a"](this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o["a"],this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new F(E.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,s,n=t.coordinate,r=this.sketchFeature_.getGeometry();if(this.mode_===R.POINT?i=this.sketchCoords_:this.mode_===R.POLYGON?(e=this.sketchCoords_[0],i=e[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):(e=this.sketchCoords_,i=e[e.length-1]),i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_){var a=this.sketchPoint_.getGeometry();a.setCoordinates(n)}if(r.getType()==f["a"].POLYGON&&this.mode_!==R.POLYGON){this.sketchLine_||(this.sketchLine_=new o["a"]);var h=r.getLinearRing(0);s=this.sketchLine_.getGeometry(),s?(s.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),s.changed()):(s=new g["a"](h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(s))}else this.sketchLineCoords_&&(s=this.sketchLine_.getGeometry(),s.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,s=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===R.LINE_STRING?(this.finishCoordinate_=s.slice(),i=this.sketchCoords_,i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),this.geometryFunction_(i,o)):this.mode_===R.POLYGON&&(i=this.sketchCoords_[0],i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e,i=this.sketchFeature_.getGeometry();this.mode_===R.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===R.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),e=this.sketchLine_.getGeometry(),e.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,i)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===R.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===R.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===f["a"].MULTI_POINT?t.setGeometry(new w["a"]([e])):this.type_===f["a"].MULTI_LINE_STRING?t.setGeometry(new C["a"]([e])):this.type_===f["a"].MULTI_POLYGON&&t.setGeometry(new k["a"]([e])),this.dispatchEvent(new F(E.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new F(E.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(N["b"]);function x(){var t=Object(b["b"])();return function(e,i){return t[e.getGeometry().getType()]}}function S(t){var e;return t===f["a"].POINT||t===f["a"].MULTI_POINT?e=R.POINT:t===f["a"].LINE_STRING||t===f["a"].MULTI_LINE_STRING?e=R.LINE_STRING:t===f["a"].POLYGON||t===f["a"].MULTI_POLYGON?e=R.POLYGON:t===f["a"].CIRCLE&&(e=R.CIRCLE),e}e["a"]=G},c437:function(t,e,i){var s,o,n=i("e1f4"),r=i("2366"),a=0,h=0;function c(t,e,i){var c=e&&i||0,d=e||[];t=t||{};var u=t.node||s,_=void 0!==t.clockseq?t.clockseq:o;if(null==u||null==_){var l=n();null==u&&(u=s=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==_&&(_=o=16383&(l[6]<<8|l[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:h+1,y=f-a+(p-h)/1e4;if(y<0&&void 0===t.clockseq&&(_=_+1&16383),(y<0||f>a)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,h=p,o=_,f+=122192928e5;var v=(1e4*(268435455&f)+p)%4294967296;d[c++]=v>>>24&255,d[c++]=v>>>16&255,d[c++]=v>>>8&255,d[c++]=255&v;var m=f/4294967296*1e4&268435455;d[c++]=m>>>8&255,d[c++]=255&m,d[c++]=m>>>24&15|16,d[c++]=m>>>16&255,d[c++]=_>>>8|128,d[c++]=255&_;for(var g=0;g<6;++g)d[c+g]=u[g];return e||r(d)}t.exports=c},c64e:function(t,e,i){var s=i("e1f4"),o=i("2366");function n(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;a<16;++a)e[n+a]=r[a];return e||o(r)}t.exports=n},e1f4:function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var s=new Uint8Array(16);t.exports=function(){return i(s),s}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}}}]);
//# sourceMappingURL=chunk-446e4c4c.86a4e86f.js.map